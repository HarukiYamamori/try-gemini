# Gemini API を利用した数学作問自動化プログラム
Gemini API を利用して、数学の問題を自動作成する試み

## 環境
- python version: 3.8以上推奨
- AI model: gemini-1.5-flash

## 使用方法
[Google AI studio](https://aistudio.google.com/prompts/new_chat)から API key を発行し、.envファイルに記述<br>
*intelliJ を使用している際は「実行構成の編集(Edit configuration)」から環境変数として設定してもいける

## 出力例
<pre>
プロンプト：数学の問題と解答例を5個作成してください。単元は二次関数で、難易度は高校1年生レベルです。解説は、公式の利用、計算過程、解答に至るまでの思考過程などを含めて記述してください。解答は、問題文、解答、解説のキーを持つJSONオブジェクトとして出力し、JSONオブジェクトのキーは、"problem", "answer", "explanation"としてください。
[{"problem": "二次関数 y = 2x² - 4x + 5 のグラフの頂点の座標と軸の方程式を求めなさい。", "answer": "頂点の座標：(1, 3), 軸の方程式：x = 1", "explanation": "この二次関数は y = a(x - p)² + q の形に変形することで頂点の座標(p, q)を求めることができます。平方完成を用いて変形します。\ny = 2x² - 4x + 5\n= 2(x² - 2x) + 5\n= 2(x² - 2x + 1 - 1) + 5\n= 2((x - 1)² - 1) + 5\n= 2(x - 1)² - 2 + 5\n= 2(x - 1)² + 3\nよって、頂点の座標は (1, 3) となります。軸の方程式は x = p なので、x = 1 となります。"}, {"problem": "二次関数 y = -x² + 6x - 8 のグラフとx軸の交点のx座標を求めなさい。", "answer": "x = 2, 4", "explanation": "x軸との交点を求めるには、y = 0 とおいてxについて解けば良い。\n-x² + 6x - 8 = 0\nx² - 6x + 8 = 0\n(x - 2)(x - 4) = 0\nx = 2, 4"}, {"problem": "二次関数 y = x² + 2x + 3 のグラフをx軸方向に-1、y軸方向に2平行移動したときの関数の式を求めなさい。", "answer": "y = (x+1)² + 2(x+1) + 5", "explanation": "x軸方向に-1平行移動するとは、xをx+1に置き換えること、y軸方向に2平行移動するとは、yをy-2に置き換えることです。\ny = x² + 2x + 3\ny - 2 = (x + 1)² + 2(x + 1) + 3\ny = (x + 1)² + 2(x + 1) + 5"}, {"problem": "頂点が(2, -1)で、点(0, 3)を通る二次関数を求めなさい。", "answer": "y = x² - 4x + 3", "explanation": "頂点形を用いて、二次関数を y = a(x - 2)² - 1 とおく。点(0, 3)を通るので、\n3 = a(0 - 2)² - 1\n3 = 4a - 1\n4a = 4\na = 1\nよって、求める二次関数は y = (x - 2)² - 1 = x² - 4x + 4 -1 = x² - 4x + 3"}, {"problem": "二次関数 y = ax² + bx + c が点(1, 2), (2, 3), (3, 6) を通るとき、a, b, c の値を求めなさい。", "answer": "a = 1, b = -1, c = 2", "explanation": "それぞれの点を代入して連立方程式を解く。\n1: a + b + c = 2\n2: 4a + 2b + c = 3\n3: 9a + 3b + c = 6\n(2) - (1): 3a + b = 1\n(3) - (2): 5a + b = 3\n(3) - (1): 8a +2b = 4  => 4a + b = 2\n(4a+b) - (3a+b) = 2-1 => a = 1\n3(1) + b = 1 => b = -2\n1 + (-2) + c = 2 => c = 3\nよって、a = 1, b = -2, c = 3\nしかし、計算に誤りがありそうです。再計算が必要です。\n正しくは、\n1) a+b+c=2\n2) 4a+2b+c=3\n3) 9a+3b+c=6\n(2)-(1): 3a+b=1\n(3)-(2): 5a+b=3\n(3)-(1): 8a+2b=4\n(3a+b)-(a+b+c)=1-2=-1\n3a-c=-1\n(5a+b)-(3a+b)=3-1=2\n2a=2, a=1\n3(1)+b=1, b=-2\n1+(-2)+c=2, c=3\nよって、a=1,b=-2,c=3"} ]
第1問
問題: 二次関数 y = 2x² - 4x + 5 のグラフの頂点の座標と軸の方程式を求めなさい。
解答: 頂点の座標：(1, 3), 軸の方程式：x = 1
解説: この二次関数は y = a(x - p)² + q の形に変形することで頂点の座標(p, q)を求めることができます。平方完成を用いて変形します。
y = 2x² - 4x + 5
= 2(x² - 2x) + 5
= 2(x² - 2x + 1 - 1) + 5
= 2((x - 1)² - 1) + 5
= 2(x - 1)² - 2 + 5
= 2(x - 1)² + 3
よって、頂点の座標は (1, 3) となります。軸の方程式は x = p なので、x = 1 となります。

第2問
問題: 二次関数 y = -x² + 6x - 8 のグラフとx軸の交点のx座標を求めなさい。
解答: x = 2, 4
解説: x軸との交点を求めるには、y = 0 とおいてxについて解けば良い。
-x² + 6x - 8 = 0
x² - 6x + 8 = 0
(x - 2)(x - 4) = 0
x = 2, 4

第3問
問題: 二次関数 y = x² + 2x + 3 のグラフをx軸方向に-1、y軸方向に2平行移動したときの関数の式を求めなさい。
解答: y = (x+1)² + 2(x+1) + 5
解説: x軸方向に-1平行移動するとは、xをx+1に置き換えること、y軸方向に2平行移動するとは、yをy-2に置き換えることです。
y = x² + 2x + 3
y - 2 = (x + 1)² + 2(x + 1) + 3
y = (x + 1)² + 2(x + 1) + 5

第4問
問題: 頂点が(2, -1)で、点(0, 3)を通る二次関数を求めなさい。
解答: y = x² - 4x + 3
解説: 頂点形を用いて、二次関数を y = a(x - 2)² - 1 とおく。点(0, 3)を通るので、
3 = a(0 - 2)² - 1
3 = 4a - 1
4a = 4
a = 1
よって、求める二次関数は y = (x - 2)² - 1 = x² - 4x + 4 -1 = x² - 4x + 3

第5問
問題: 二次関数 y = ax² + bx + c が点(1, 2), (2, 3), (3, 6) を通るとき、a, b, c の値を求めなさい。
解答: a = 1, b = -1, c = 2
解説: それぞれの点を代入して連立方程式を解く。
1: a + b + c = 2
2: 4a + 2b + c = 3
3: 9a + 3b + c = 6
(2) - (1): 3a + b = 1
(3) - (2): 5a + b = 3
(3) - (1): 8a +2b = 4  => 4a + b = 2
(4a+b) - (3a+b) = 2-1 => a = 1
3(1) + b = 1 => b = -2
1 + (-2) + c = 2 => c = 3
よって、a = 1, b = -2, c = 3
しかし、計算に誤りがありそうです。再計算が必要です。
正しくは、
1) a+b+c=2
2) 4a+2b+c=3
3) 9a+3b+c=6
(2)-(1): 3a+b=1
(3)-(2): 5a+b=3
(3)-(1): 8a+2b=4
(3a+b)-(a+b+c)=1-2=-1
3a-c=-1
(5a+b)-(3a+b)=3-1=2
2a=2, a=1
3(1)+b=1, b=-2
1+(-2)+c=2, c=3
よって、a=1,b=-2,c=3
</pre>

基本は問題、解答、解説が全て適切に作成されるようだが、
時々、上記の第５問のように解答と解説で結果にズレが生じている場合がある

正確性に課題あり。